[build]
  publish = "dist"
  command = "npm run build"

[functions]
  directory = "netlify/functions"

# Scheduled function - runs every minute to check for task alerts
[functions."scheduled-alerts"]
  schedule = "* * * * *"

# Critical lead alerts - runs every 15 minutes during business hours (8 AM - 8 PM)
# Checks for leads that haven't been contacted (2h and 24h escalation)
[functions."critical-alerts"]
  schedule = "*/15 8-20 * * *"

# Functions should NOT be redirected
[[redirects]]
  from = "/.netlify/*"
  to = "/.netlify/:splat"
  status = 200

# SPA fallback - all other routes go to index.html
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
